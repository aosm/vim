diff -r -u -N --exclude='*.orig' vim72.orig/src/edit.c vim72/src/edit.c
--- vim72.orig/src/edit.c	2008-08-06 05:51:17.000000000 -0700
+++ vim72/src/edit.c	2008-08-19 01:06:04.000000000 -0700
@@ -318,7 +318,7 @@
     int		inserted_space = FALSE;     /* just inserted a space */
     int		replaceState = REPLACE;
     int		nomove = FALSE;		    /* don't move cursor on return */
-
+    int		orig_count = count;	    /* for autoindent calculation */
     /* Remember whether editing was restarted after CTRL-O. */
     did_restart_edit = restart_edit;
 
@@ -407,7 +407,7 @@
 	    AppendCharToRedobuff(cmdchar);
 	    if (cmdchar == 'g')		    /* "gI" command */
 		AppendCharToRedobuff('I');
-	    else if (cmdchar == 'r')	    /* "r<CR>" command */
+	    else if (cmdchar == 'r' && !Unix2003_compat)	    /* "r<CR>" command */
 		count = 1;		    /* insert only one <CR> */
 	}
     }
@@ -1265,6 +1265,8 @@
 		goto doESCkey;
 	    }
 #endif
+	    if (Unix2003_compat && (cmdchar == 'r') && (orig_count > 1))
+		did_ai = TRUE;
 	    if (ins_eol(c) && !p_im)
 		goto doESCkey;	    /* out of memory */
 	    auto_format(FALSE, FALSE);
